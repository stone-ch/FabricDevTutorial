CardChain（卡链）



概述：市场上，商家为了吸引顾客，推出了各种办会员卡，预充值享受优惠的活动，但是大多数消费者在充值完成后，在余额未使用完的时候商家就跑路了，消费者的损失难以追回，消费者的权益难以保障。CardChain借助区块链技术，将消费者的预充值和消费记录保存在区块链中，为消费者维权提供了证据。同时，基于区块链的不可篡改特性，能够保证商家和消费者的信任和共识，从而可以使用“消费预储值”的方式替代以往的“全额预储值”的方式，既可以保证商家的利益，又可以极大的减小消费者的损失。另外，通过区块链使商家的积分共享，也可以达到引导消费者消费的效果。



上链对象：

充值卡，会员卡，礼品卡等各种商家推出的吸引用户的卡。比如理发店，美容店，健身房的储值卡；超市的积分卡、礼品卡。



链上存储内容：

Key：

卡号（ID）。 每个商家有不同的编号前缀，以确保不冲突。

Value：

1、余额；

2、积分；（每个商家可能有不同的积分规则。）

3、剩余消费次数；

4、消费记录；

5、消费对账单；

6、消费评价（待定）。  要以安全的方式评价。比如：以匿名的方式评价，防止商家对差评用户恶意攻击，根据合约规则按照评论登记给商户评分；只能完成消费的用户进行评价，防止用户恶意攻击商家，一旦发现恶意评论，就安合约规定扣除账户金额，或者积分。删除评论需要有第三方签名。



提供的功能：

1、查询余额，积分；

2、查询消费历史记录；

3、商家设定明确的退款及赔偿准则，当发生退款事件时，一旦是符合该准则的，合约便会立马判定商家应该进行退款或赔偿，经商家和消费者双重签名生效，并记录到区块中；

4、允许消费者以消费预储值的方式进行会员注册，或者享受套餐优惠。即消费者不用一次性充值套餐中的全部金额，而是在每次消费时进行“预储值”。比如，每次洗头10元，商家提供的套餐是充值100元洗20次，那么消费者就可以在前2次洗头的时候每次支付20元，然后2次15元，然后3次10元，剩余13次免费洗头。

5、允许第三方监管（可选，看时间情况决定是否增加此功能）；

6、允许多家商家同时允许消费者使用一张卡（手机号，账户）进行消费，或者互相承认积分的有效。



项目动机：

1、利用积分，商家互相引流。各种商店的积分卡，储值卡系统大多都是内部系统，消费者只能在其门店进行余额、积分的查询，放在区块链上，既可以保证数据的私密性，又可以方便消费者进行查询。同时经过商家和消费者的双重签名可保证数据的真实性。

2、保留维权证据。理发店，美容店是储值卡投诉的重灾区，新闻中经常会爆出一些商家诱导用户办理储值卡，然后店家跑路的情况，这种情况下一般消费者在维权的过程中不容易保留足够的证据，通过区块链技术可以完整的保存消费证据。另外，消费者在办理完储值卡之后，一般发生纠纷需要退款或者赔偿的时候商家都会扯皮，以各种理由不赔或者少赔，消费者很少能够按照当初所约定的金额得到补偿，主要原因是商家在引导用户消费的时候很多协定都是口头说的，业务员也经常会隐瞒或夸大一些细节诱导消费者消费。所以系统中要求在办理卡片的时候必须设定好相应的权益条款，赔偿金额等，并自动生成相应的智能合约，一旦发生违约时间，立即在账本中添加赔偿记录，当商家不承认该记录时，就有证据可以申请仲裁，或者起诉商家。

3、保障商家和消费者的权益。以“消费预储值”的方式替代以往的“全额预储值”的方式，即可以帮助商家吸引客户，又能保证即使商家跑路消费者也可以避免较大的损失。



说明：

1、项目中不涉及资金的存储，只记录账户金额，初始账户金额可以通过线下交易并由商户进行初始化，并经过商家和消费者的共同签名确认。

2、第三方监管机构可以是消费者协会，或者其他权威部门。

3、不同商家可以是连锁店，互相有合作关系的店铺。



架构设计：

后端：Hyperledger Fabric为平台，使用GO 写Chaincode，使用Nodejs写前端调用。

前端：PC和移动端都用网页形式展现。移动端如果时间充足可以考虑使用APP或者微信小程序方式展现。
